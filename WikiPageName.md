# Introduction #

ANSI EX编码是SDK为了让所有基于ansi编码的程序能无需任何更改而适应unicode环境而创造的编码格式.

最大的用途就是,特殊字符文件名打不开的问题将得到解决,而应用程序代码无需任何更改,仅仅需要重编译一次即可.

# Details #

ANSI EX编码是SDK为了让所有基于ansi编码的程序能无需任何更改而适应unicode环境而创造的编码格式.

虽然UTF-8编码也能完成这种需求,然而采用UTF-8编码的程序,却无法兼容旧的基于本地码的程序正确解码.即只能实现函数兼容,而不能实现数据+函数兼容.

ANSI EX编码本质上是ANSI编码的扩充,它100%兼容原有的ANSI本地码,但是也能保存所有的unicode-16编码.

这使得从unicode转本地码不再存在任何损失,即不会因为当前代码页不存在的编码,导致信息丢失.unicode-16转ansi ex,到ansi ex转unicode-16能够100%转换.

编码格式如下:
对于已经在当前代码页中有编码的字符,原有格式不变,对于没有编码的字符,则使用如下编码格式,一共4字节,使用0xFF(0b11111111)作为前导词.unicode将分拆保存在其后的3字节中.
```
0b 11111111
0b 1000xxxx  unicode bit [15:12]
0b 10xxxxxx          bit [11:06]
0b 10xxxxxx          bit [05:00]
```
这种编码格式可以实现代码+数据兼容性,旧的程序完全不必任何更改,只需在shell部分将涉及到unicode字符集的地方进行转换.
转换过程如下:
shell -> unicode -> ansi-ex -> 应用程序 -> ansi-ex-> unicode ->shell

而且,即使shell部分没有任何处理,因为ansi-ex完全兼容ansi编码,也不会出现任何副作用.